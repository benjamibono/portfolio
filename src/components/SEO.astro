---
import { siteMetadata } from '../constants/metadata';

interface Props {
  title?: string;
  description?: string;
  image?: string;
  canonicalUrl?: string;
}

const {
  title = siteMetadata.title,
  description = siteMetadata.description,
  image = siteMetadata.socialImage,
  canonicalUrl = siteMetadata.siteUrl,
} = Astro.props;

// Ensure image is an absolute URL
const absoluteImage = image.startsWith('http') ? image : `${siteMetadata.siteUrl}${image}`;
---

<!-- SEO -->
<title>{title}</title>
<meta name="description" content={description} />
<link rel="canonical" href={canonicalUrl} />

<!-- Open Graph -->
<meta property="og:type" content="website" />
<meta property="og:url" content={canonicalUrl} />
<meta property="og:title" content={title} />
<meta property="og:description" content={description} />
<meta property="og:image" content={absoluteImage} />

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:url" content={canonicalUrl} />
<meta name="twitter:title" content={title} />
<meta name="twitter:description" content={description} />
<meta name="twitter:image" content={absoluteImage} />


<!-- Theme Color -->
<meta name="theme-color" content="#fafafa" media="(prefers-color-scheme: light)" />
<meta name="theme-color" content="#0a0a0a" media="(prefers-color-scheme: dark)" />

<!-- JSON-LD Structured Data -->
<script type="application/ld+json" set:html={JSON.stringify({
  '@context': 'https://schema.org',
  '@type': 'Person',
  name: 'Benjami Bono',
  url: siteMetadata.siteUrl,
  image: `${siteMetadata.siteUrl}${siteMetadata.socialImage}`,
  jobTitle: 'Full Stack Developer',
  worksFor: {
    '@type': 'Organization',
    name: '21 Impact Labs'
  },
  sameAs: [
    siteMetadata.github,
    siteMetadata.linkedin
  ],
  email: siteMetadata.email,
  description: siteMetadata.description
})} />

<script type="application/ld+json" set:html={JSON.stringify({
  '@context': 'https://schema.org',
  '@type': 'WebSite',
  name: siteMetadata.title,
  url: siteMetadata.siteUrl,
  description: siteMetadata.description,
  author: {
    '@type': 'Person',
    name: 'Benjami Bono'
  }
})} />
